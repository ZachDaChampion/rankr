(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ae4df35"],{"08d5":function(e,t,n){"use strict";var r=n("6edc"),i=n.n(r);i.a},1405:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"compare"},[n("div",{style:{width:100*e.progress+"%"},attrs:{id:"progress"}}),n("h1",[e._v(e._s(e.showTitle))]),n("compare-section"),n("ranking-section",{attrs:{id:"ranking-section",showId:this.$route.query.id}})],1)},i=[],s=(n("96cf"),n("1da1")),a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"compare-section",class:e.smallArea?"short":""},[n("div",{attrs:{id:"episodes"}},[n("transition",{attrs:{name:"slide-"+(0===e.selected?"up":"down")}},[n("episode",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.firstEp).length&&e.displayEps&&!e.finished,expression:"Object.keys(firstEp).length && displayEps && !finished"}],ref:"episodeFirst",attrs:{id:"episode-first",data:e.firstEp},nativeOn:{click:function(t){return e.chooseWinner(0)}}})],1),n("transition",{attrs:{name:"fade"}},[n("h2",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.firstEp).length&&Object.keys(e.secondEp).length&&e.imagesLoaded&&e.displayEps&&!e.finished,expression:"\n          Object.keys(firstEp).length &&\n            Object.keys(secondEp).length &&\n            imagesLoaded &&\n            displayEps &&\n            !finished\n        "}]},[e._v(" OR ")])]),n("transition",{attrs:{name:"slide-"+(1===e.selected?"up":"down")}},[n("episode",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.secondEp).length&&e.displayEps&&!e.finished,expression:"Object.keys(secondEp).length && displayEps && !finished"}],ref:"episodeSecond",attrs:{id:"episode-second",data:e.secondEp},nativeOn:{click:function(t){return e.chooseWinner(1)}}})],1)],1),n("h2",{directives:[{name:"show",rawName:"v-show",value:!(Object.keys(e.firstEp).length&&Object.keys(e.secondEp).length&&e.imagesLoaded)&&!e.finished,expression:"\n      !(\n        Object.keys(firstEp).length &&\n        Object.keys(secondEp).length &&\n        imagesLoaded\n      ) && !finished\n    "}]},[e._v(" Loading episodes... ")]),n("transition",{attrs:{name:"fade"}},[n("h2",{directives:[{name:"show",rawName:"v-show",value:e.finished,expression:"finished"}]},[e._v(" All episodes have been compared! ")])])],1)},c=[];n("99af"),n("d3b7"),n("3ca3"),n("ddb0");function d(e){if(Array.isArray(e))return e}n("a4d3"),n("e01a"),n("d28b"),n("e260");function u(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(c){i=!0,s=c}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw s}}return n}}n("a630"),n("fb6a"),n("b0c0"),n("25f0");function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return d(e)||u(e,t)||p(e,t)||l()}var g=n("d4ec"),b=n("bee2"),v=n("262e"),m=n("2caf"),y=n("9ab4"),k=n("60a3"),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"episode"},[n("img-component",{ref:"img",attrs:{id:"img",src:e.data.img}}),n("div",{staticClass:"details"},[n("h1",[e._v(e._s(e.data.title))]),n("h2",[e._v("S"+e._s(e.data.season)+" E"+e._s(e.data.episode)+" · "+e._s(e.data.date))]),n("p",[e._v(e._s(e.data.overview))])])],1)])},j=[],w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("img",{staticClass:"img-component",attrs:{src:e.src},on:{load:function(t){e.loaded=!0}}})},E=[],x=function(e){Object(v["a"])(n,e);var t=Object(m["a"])(n);function n(){var e;return Object(g["a"])(this,n),e=t.apply(this,arguments),e.loaded=!1,e}return Object(b["a"])(n,[{key:"imgLoaded",get:function(){return this.loaded}}]),n}(k["c"]);Object(y["a"])([Object(k["b"])({required:!0})],x.prototype,"src",void 0),Object(y["a"])([Object(k["b"])({required:!1})],x.prototype,"defaultImg",void 0),x=Object(y["a"])([k["a"]],x);var _=x,$=_,C=n("2877"),R=Object(C["a"])($,w,E,!1,null,"0cb028e4",null),A=R.exports,I=function(e){Object(v["a"])(n,e);var t=Object(m["a"])(n);function n(){return Object(g["a"])(this,n),t.apply(this,arguments)}return Object(b["a"])(n,[{key:"imgLoaded",get:function(){return this.$refs.img.imgLoaded}}]),n}(k["c"]);Object(y["a"])([Object(k["b"])({required:!0})],I.prototype,"data",void 0),I=Object(y["a"])([Object(k["a"])({components:{ImgComponent:A}})],I);var S=I,q=S,L=(n("1a09"),Object(C["a"])(q,O,j,!1,null,"adc80650",null)),N=L.exports,M=n("bc3a"),T=n.n(M);n("4de4");function W(e){if(!e.length||e.length!=e[0].length)return[];for(var t=[],n=0;n<e.length;++n)t.push({index:n,rating:0,rated:!1});for(var r=0;r<e.length;++r)for(var i=0;i<e[r].length;++i)null!=e[r][i]&&(t[r].rating+=e[r][i],t[i].rating-=e[r][i],t[r].rated=!0,t[i].rated=!0);return t}function D(e,t){for(var n=Array.prototype.slice.call(e).filter((function(e){return e.rated})).sort((function(e,t){return t.rating-e.rating})),r=[],i=0;i<n.length;++i){var s=n[i];r.push({season:t[s.index].season,number:t[s.index].number,rating:s.rating,rank:i>0&&s.rating===n[i-1].rating?r[i-1].rank:i+1})}return r}function P(e){return new Promise((function(t){return setTimeout(t,e)}))}var z=function(e){Object(v["a"])(n,e);var t=Object(m["a"])(n);function n(){var e;return Object(g["a"])(this,n),e=t.apply(this,arguments),e.firstEp={},e.secondEp={},e.selected=-1,e.displayEps=!0,e.finished=!1,e.smallArea=!1,e}return Object(b["a"])(n,[{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.episodesDownloaded){e.next=3;break}return e.next=3,this.$store.dispatch("downloadComparisons",this.id);case 3:if(this.$store.getters.getProgress(this.id),t=this.pickRandom(),t){e.next=9;break}return e.next=8,this.finishComparing();case 8:return e.abrupt("return",0);case 9:return e.next=11,this.setComparison(this.id,t[0],t[1]);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"finishComparing",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.displayEps=!1,e.next=3,P(650);case 3:return this.finished=!0,e.next=6,P(300);case 6:this.smallArea=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateRankings",value:function(){var e=W(this.comparisons);this.$store.dispatch("updateRankings",{showId:this.id,rankings:D(e,this.lookup)})}},{key:"pickRandom",value:function(){var e=Math.floor(Math.random()*this.lookup.length),t=Math.floor(Math.random()*e);console.log(t,e);var n=t,r=e,i=n,s=r;while(n===r||this.comparisons[n][r]){if(++n,n>=r&&(n=0,++r),r>=this.lookup.length&&(n=0,r=1),console.log(n,r),n===i&&r===s||n===t&&r===e)return null;i=n,s=r}return[n,r]}},{key:"setComparison",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,s,a,o,c,d,u,h,p,l,g=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=g.length>3&&void 0!==g[3]?g[3]:0,s=this.lookup[n],a=this.lookup[r],o=T.a.get("http://localhost:3000/episode?show=".concat(t,"&s=").concat(s.season,"&e=").concat(s.number,"&imgsize=w780")).then((function(e){return e.data})),c=T.a.get("http://localhost:3000/episode?show=".concat(t,"&s=").concat(a.season,"&e=").concat(a.number,"&imgsize=w780")).then((function(e){return e.data})),d=P(i),e.next=8,Promise.all([o,c,d]);case 8:return u=e.sent,h=f(u,3),p=h[0],l=h[1],h[2],this.firstEp=p,this.secondEp=l,this.firstEp.index=n,this.secondEp.index=r,this.$store.dispatch("updateCurrentComparisons",{showId:this.id,firstEp:this.firstEp.index,secondEp:this.secondEp.index}),e.abrupt("return",0);case 19:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"chooseWinner",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selected=t,e.t0=t,e.next=0===e.t0?4:1===e.t0?6:8;break;case 4:return this.$store.dispatch("chooseComparisonWinner",this.firstEp.index),e.abrupt("break",8);case 6:return this.$store.dispatch("chooseComparisonWinner",this.secondEp.index),e.abrupt("break",8);case 8:if(this.updateRankings(),n=this.pickRandom(),console.log(this.comparisons),n){e.next=15;break}return e.next=14,this.finishComparing();case 14:return e.abrupt("return",0);case 15:return this.displayEps=!1,e.next=18,this.setComparison(this.id,n[0],n[1],600);case 18:return this.displayEps=!0,e.abrupt("return",0);case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"id",get:function(){return this.$route.query.id?String(this.$route.query.id):""}},{key:"episodesDownloaded",get:function(){return!!this.$store.getters.getComparisons(this.id)}},{key:"lookup",get:function(){return this.$store.getters.getComparisons(this.id).lookup}},{key:"comparisons",get:function(){return this.$store.getters.getComparisons(this.id).comparisons}},{key:"imagesLoaded",get:function(){return this.$refs.episodeFirst.imgLoaded&&this.$refs.episodeSecond.imgLoaded}},{key:"rankings",get:function(){return this.$store.getters.getRankings(this.id)}}]),n}(k["c"]);z=Object(y["a"])([Object(k["a"])({components:{Episode:N}})],z);var F=z,J=F,G=(n("08d5"),Object(C["a"])(J,o,c,!1,null,"380eb78a",null)),K=G.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.rankings,(function(t,r){return n("ranked-episode",{key:t.season+"-"+t.number+"-"+t.rank,attrs:{index:r,"show-id":e.showId,season:t.season,number:t.number,rating:t.rating,rank:t.rank}})})),1)},B=[],H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.data?n("div",{staticClass:"ranked-episode"},[n("div",{attrs:{id:"main-info"}},[n("div",{attrs:{id:"img-area"}},[n("img-component",{ref:"img",attrs:{id:"img",src:e.data.img}}),n("div",{attrs:{id:"rank"}},[e._v(e._s(e.rank))])],1),n("div",{attrs:{id:"description"}},[n("div",{attrs:{id:"title-section"}},[n("h1",[e._v(e._s(e.data.title))]),n("h2",[e._v("S"+e._s(e.data.season)+" E"+e._s(e.data.episode)+" · "+e._s(e.data.date))])]),n("p",[e._v(e._s(e.data.overview))])])])]):e._e()},Q=[],V=function(e){Object(v["a"])(n,e);var t=Object(m["a"])(n);function n(){var e;return Object(g["a"])(this,n),e=t.apply(this,arguments),e.data={},e}return Object(b["a"])(n,[{key:"created",value:function(){var e=this;this.$store.getters.getCached("epData-".concat(this.showId,"-").concat(this.season,"-").concat(this.number))?this.data=this.$store.getters.getCached("epData-".concat(this.showId,"-").concat(this.season,"-").concat(this.number)):T.a.get("http://localhost:3000/episode?show=".concat(this.showId,"&s=").concat(this.season,"&e=").concat(this.number,"&imgsize=w500")).then((function(t){return e.data=t.data}))}},{key:"imgLoaded",get:function(){return this.$refs.img.imgLoaded}},{key:"lookup",get:function(){return this.$store.getters.getComparisons(this.showId).lookup}}]),n}(k["c"]);Object(y["a"])([Object(k["b"])({required:!0})],V.prototype,"showId",void 0),Object(y["a"])([Object(k["b"])({required:!1})],V.prototype,"season",void 0),Object(y["a"])([Object(k["b"])({required:!1})],V.prototype,"number",void 0),Object(y["a"])([Object(k["b"])({required:!1})],V.prototype,"rank",void 0),Object(y["a"])([Object(k["b"])({required:!1})],V.prototype,"rating",void 0),Object(y["a"])([Object(k["b"])({required:!1})],V.prototype,"index",void 0),V=Object(y["a"])([Object(k["a"])({components:{ImgComponent:A}})],V);var X=V,Y=X,Z=(n("9da0"),Object(C["a"])(Y,H,Q,!1,null,"f20e3580",null)),ee=Z.exports,te=function(e){Object(v["a"])(n,e);var t=Object(m["a"])(n);function n(){return Object(g["a"])(this,n),t.apply(this,arguments)}return Object(b["a"])(n,[{key:"rankings",get:function(){return console.log("RANKINGS",this.$store.getters.getRankings(this.showId)),this.$store.getters.getRankings(this.showId)}}]),n}(k["c"]);Object(y["a"])([Object(k["b"])({required:!0})],te.prototype,"showId",void 0),te=Object(y["a"])([Object(k["a"])({components:{RankedEpisode:ee}})],te);var ne=te,re=ne,ie=Object(C["a"])(re,U,B,!1,null,"8c2d4c72",null),se=ie.exports,ae=a["a"].extend({name:"Compare",components:{CompareSection:K,RankingSection:se},data:function(){return{showTitle:""}},computed:{progress:function(){return this.$store.getters.getProgress(String(this.$route.query.id))}},created:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.$store.getters.getCached(this.$route.query.id),e.t0){e.next=5;break}return e.next=4,T.a.get("http://localhost:3000/tvtitle?id=".concat(this.$route.query.id));case 4:e.t0=e.sent.data;case 5:return e.abrupt("return",this.showTitle=e.t0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),oe=ae,ce=(n("4df9"),Object(C["a"])(oe,r,i,!1,null,"1e966443",null));t["default"]=ce.exports},"1a09":function(e,t,n){"use strict";var r=n("8d26"),i=n.n(r);i.a},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,s=n("1dde"),a=n("ae40"),o=s("filter"),c=a("filter");r({target:"Array",proto:!0,forced:!o||!c},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var r=n("0366"),i=n("7b0b"),s=n("9bdd"),a=n("e95a"),o=n("50c4"),c=n("8418"),d=n("35a1");e.exports=function(e){var t,n,u,h,p,l,f=i(e),g="function"==typeof this?this:Array,b=arguments.length,v=b>1?arguments[1]:void 0,m=void 0!==v,y=d(f),k=0;if(m&&(v=r(v,b>2?arguments[2]:void 0,2)),void 0==y||g==Array&&a(y))for(t=o(f.length),n=new g(t);t>k;k++)l=m?v(f[k],k):f[k],c(n,k,l);else for(h=y.call(f),p=h.next,n=new g;!(u=p.call(h)).done;k++)l=m?s(h,v,[u.value,k],!0):u.value,c(n,k,l);return n.length=k,n}},"4df9":function(e,t,n){"use strict";var r=n("7661"),i=n.n(r);i.a},5132:function(e,t,n){},"6edc":function(e,t,n){},7661:function(e,t,n){},"8d26":function(e,t,n){},"9da0":function(e,t,n){"use strict";var r=n("5132"),i=n.n(r);i.a},a630:function(e,t,n){var r=n("23e7"),i=n("4df4"),s=n("1c7e"),a=!s((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:a},{from:i})},fb6a:function(e,t,n){"use strict";var r=n("23e7"),i=n("861d"),s=n("e8b5"),a=n("23cb"),o=n("50c4"),c=n("fc6a"),d=n("8418"),u=n("b622"),h=n("1dde"),p=n("ae40"),l=h("slice"),f=p("slice",{ACCESSORS:!0,0:0,1:2}),g=u("species"),b=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!l||!f},{slice:function(e,t){var n,r,u,h=c(this),p=o(h.length),l=a(e,p),f=a(void 0===t?p:t,p);if(s(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!s(n.prototype)?i(n)&&(n=n[g],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return b.call(h,l,f);for(r=new(void 0===n?Array:n)(v(f-l,0)),u=0;l<f;l++,u++)l in h&&d(r,u,h[l]);return r.length=u,r}})}}]);
//# sourceMappingURL=chunk-5ae4df35.4badd311.js.map